<%- include('../includes/head.ejs') %>
  <h2 class="text-center">Categories Page</h2>

  <main>
    <section class="category">
        <% if (categories && categories.length > 0) { %>
            <% for (let cat of categories) { %>
                <a href="/categories/<%= cat %>" class="btn btn-primary"><%= cat %></a>
            <% } %>
            
        <% } else { %>
        <h1>No category!!</h1>
        <% } %>
    </section>
    <section class="products">
        <% if (products && products.length > 0) { %>
            <% for (let prod of products) { %>
                <div
                    class="card"
                    style="width: 15rem; float: left; margin: 1rem; border: 1px solid rgb(0, 98, 128); cursor: pointer;"
                    onclick="product__click()"
                    prodId="<%= prod.id %>"
                >
                    <div class="card-body">
                        <h5 class="card-title"><%= prod.name %></h5>
                        <p><%= prod.price %>$</p>
                        <p><i><%= prod.category %></i></p>
                    </div>
                </div>
            <% } %>
        <% }  %>
    </section>
    <script>
        function product__click(event) {
            event = event || window.event;
            const src = event.currentTarget;
            const prodId = src.getAttribute('prodId');
            window.location.href = "/products/"+prodId;
        }
        </script>
  </main>
  <%- include('../includes/end.ejs') %>